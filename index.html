<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8"/>
    <title>
        Lab-Dit Gestor de acceso remoto
    </title>
    <link rel="stylesheet" type="text/css" href="/labo_sphere/web/libs/jquery-easyui-1.9.5/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="/labo_sphere/web/libs/jquery-easyui-1.9.5/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="/labo_sphere/web/libs/jquery-easyui-1.9.5/demo/demo.css">
    <link rel="stylesheet" type="text/css" href="/labo_sphere/web/css/style.css">
    <script type="text/javascript" src="/labo_sphere/web/libs/jquery-easyui-1.9.5/jquery.min.js"></script>
    <script type="text/javascript" src="/labo_sphere/web/libs/jquery-easyui-1.9.5/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="/labo_sphere/web/libs/formatters.js"></script>
    <script type="text/javascript" src="/labo_sphere/web/libs/actions.js"></script>
    <script type="text/javascript">

        function clearForm() {
            $('#sesion_host').textbox({
                value:'',
                validType:"regexp['^l[0-9]{3}']",
                invalidMessage:'Enter valid host name. i.e: l067',
                height:20,
                onChange: function() {
                    if ($('#sesion_host').textbox('isValid')) $('#sesion_hostrb').prop("checked",true);
                }
            });
            $('#formulario').form('clear');
        }

        function selectSession(sesion) {
            if (sesion!=='hostrb') $('#sesion_host').textbox('setValue','');
            // as setValue fires up activate hostrb radiobutton, need to properly set
            $('#sesion_'+sesion).prop("checked",true);
            return false; // do not continue chain event
        }

        function acceder() {
            // if ok then ask for selected session/option
            var username=$('#username').val();
            var password=$('#password').val();
            if (username==="" || password==="") {
                $.messager.alert("Error","Debe indicar usuario y contrase&ntilde;a","error");
                return;
            }
            var mode=$('input:radio[name=sesion]:checked').val();
            if (mode==="admin") {
                $('#formulario').submit();
                return;
            }
            var tipo=$('input:radio[name=tipo]:checked').val();
            if (typeof(tipo)==="undefined") tipo="";
            switch(tipo) {
                case "desktop" :
                case "console" :
                case "tunel" :  labo_session(mode,tipo); return;
                default: $.messager.alert("Error","Debe seleccionar un tipo de sesi&oacute;n","error"); return;
            }
        }

    </script>
</head>
<body onload="clearForm()">
<img src="web/images/cdcTitle.png" alt="header dit">
<h1>Servicio de acceso remoto a los laboratorios docentes</h1>
<h2>
    <br/>Seleccione opci&oacute;n:
</h2>
<form id="formulario" method="POST" action="web/admin.php" >
    <input type="hidden" name="host" id="session_host" value=""/>
<ul>
    <li><input type="radio" name="sesion" id="sesion_laboA" value="laboA"  onclick="selectSession('laboA');"/>
        <label for="sesion_laboA">Abrir sesi&oacute;n en el Laboratorio del Edificio A</label>
    </li>
    <li><input type="radio" name="sesion" id="sesion_laboB" value="laboB"  onclick="selectSession('laboB');"/>
        <label for="sesion_laboB">Abrir sesi&oacute;n el el Laboratorio del Edificio B</label>
    </li>
    <li><input type="radio" name="sesion" id="sesion_virtual" value="virtual"  onclick="selectSession('virtual');"/>
        <label for="sesion_virtual">Abrir sesi&oacute;n en clientes de acceso remoto</label>
    </li>
    <li><input type="radio" name="sesion" id="sesion_mac" value="macs"  onclick="selectSession('macs');"/>
        <label for="sesion_virtual">Abrir sesi&oacute;n en equipos Mac-OSX</label>
    </li>
    <li><input type="radio" name="sesion" id="sesion_newvm" value="newvm"  onclick="selectSession('newvm');/>
        <label for="sesion_newvm">Crear y ejecutar una nueva m&aacute;quina virtual</label>
    </li>
    <li><input type="radio" name="sesion" id="sesion_hostrb" value="host" onclick="selectSession('hostrb');"/>
        <label for="sesion_host">Acceso al equipo:</label>
        <input name="host" value="" id="sesion_host" size="4" maxlength="4"/>
    </li>
    <li><input type="radio" name="sesion" id="sesion_admin" value="admin" onclick="selectSession('admin');"/>
        <label for="sesion_admin">Acceso al interfaz de gesti&oacute;n</label>
    </li>
</ul>
<h2>
    <br/>Indique tipo de sesi&oacute;n a desplegar:
</h2>
<table style="width:640px;">
    <tr>
        <th>
            <img src="web/images/desktop.png" alt="desktop"><br/>
            <input type="radio" name="tipo" id="tipo_desktop" value="desktop"/><br/>
            <label for="tipo_desktop">Escritorio Remoto</label>
        </th>
        <th>
            <img src="web/images/terminal.png" alt="terminal"><br/>
            <input type="radio" name="tipo" id="tipo_terminal" value="console"/><br/>
            <label for="tipo_terminal">Terminal de texto</label>
        </th>
        <th>
            <img src="web/images/sshtunel.png" alt="sshtunel"><br/>
            <input type="radio" name="tipo" id="tipo_tunel" value="tunel"/><br/>
            <label for="tipo_tunel">T&uacute;nel SSH</label>
        </th>
    </tr>
</table>
<h2>
        <br/>Identificaci&oacute;n
</h2>
<p>
    Por favor: intruduzca los credenciales de su cuenta del laboratorio<br/>
    Si no tiene cuenta, o no recuerda la contrase&ntilde;a, pulse <a href="http://www.lab.dit.upm.es/labng">aqu&iacute;</a>
    <br/>&nbsp;<br/>
    <span style="display:inline-block;width:400px;text-align:right;padding-right:50px">
        <label for="username">Nombre de usuario</label>
        <input type="text" name="username" id="username" value=""/>
        <br/>
        <label for="password">Contrase&ntilde;a</label>
        <input type="password" name="password" id="password" value=""/>
    </span>
    <span style="display:inline-block;width:400px;text-align:left;padding-left:50px">
        <input type="button" onclick="acceder();" value="Acceder"/>
    </span>

</p>

</form>
<footer>
    <br/>
    <hr/>
    P&aacute;gina principal del <a href="http://www.lab.dit.upm.es">Laboratorio</a><br/>
    P&aacute;gina web del <a href="http://www.dit.upm.es">Departamento</a>
</footer>
</body>
</html>